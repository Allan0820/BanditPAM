\hypertarget{glue__intersect__meat_8hpp_source}{}\doxysection{glue\+\_\+intersect\+\_\+meat.\+hpp}
\label{glue__intersect__meat_8hpp_source}\index{/Users/motiwari/Desktop/BanditPAM/headers/carma/extern/armadillo-\/code/include/armadillo\_bits/glue\_intersect\_meat.hpp@{/Users/motiwari/Desktop/BanditPAM/headers/carma/extern/armadillo-\/code/include/armadillo\_bits/glue\_intersect\_meat.hpp}}

\begin{DoxyCode}{0}
\DoxyCodeLine{1 \textcolor{comment}{// Copyright 2008-\/2016 Conrad Sanderson (http://conradsanderson.id.au)}}
\DoxyCodeLine{2 \textcolor{comment}{// Copyright 2008-\/2016 National ICT Australia (NICTA)}}
\DoxyCodeLine{3 \textcolor{comment}{// }}
\DoxyCodeLine{4 \textcolor{comment}{// Licensed under the Apache License, Version 2.0 (the "{}License"{});}}
\DoxyCodeLine{5 \textcolor{comment}{// you may not use this file except in compliance with the License.}}
\DoxyCodeLine{6 \textcolor{comment}{// You may obtain a copy of the License at}}
\DoxyCodeLine{7 \textcolor{comment}{// http://www.apache.org/licenses/LICENSE-\/2.0}}
\DoxyCodeLine{8 \textcolor{comment}{// }}
\DoxyCodeLine{9 \textcolor{comment}{// Unless required by applicable law or agreed to in writing, software}}
\DoxyCodeLine{10 \textcolor{comment}{// distributed under the License is distributed on an "{}AS IS"{} BASIS,}}
\DoxyCodeLine{11 \textcolor{comment}{// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.}}
\DoxyCodeLine{12 \textcolor{comment}{// See the License for the specific language governing permissions and}}
\DoxyCodeLine{13 \textcolor{comment}{// limitations under the License.}}
\DoxyCodeLine{14 \textcolor{comment}{// -\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/}}
\DoxyCodeLine{15 }
\DoxyCodeLine{16 }
\DoxyCodeLine{19 }
\DoxyCodeLine{20 }
\DoxyCodeLine{21 }
\DoxyCodeLine{22 \textcolor{keyword}{template}<\textcolor{keyword}{typename} T1, \textcolor{keyword}{typename} T2>}
\DoxyCodeLine{23 \textcolor{keyword}{inline}}
\DoxyCodeLine{24 \textcolor{keywordtype}{void}}
\DoxyCodeLine{25 glue\_intersect::apply(\mbox{\hyperlink{classMat}{Mat<typename T1::elem\_type>}}\& out, \textcolor{keyword}{const} \mbox{\hyperlink{classGlue}{Glue<T1,T2,glue\_intersect>}}\& X)}
\DoxyCodeLine{26   \{}
\DoxyCodeLine{27   arma\_extra\_debug\_sigprint();}
\DoxyCodeLine{28   }
\DoxyCodeLine{29   \mbox{\hyperlink{classCol}{uvec}} iA;}
\DoxyCodeLine{30   \mbox{\hyperlink{classCol}{uvec}} iB;}
\DoxyCodeLine{31   }
\DoxyCodeLine{32   glue\_intersect::apply(out, iA, iB, X.A, X.B, \textcolor{keyword}{false});}
\DoxyCodeLine{33   \}}
\DoxyCodeLine{34 }
\DoxyCodeLine{35 }
\DoxyCodeLine{36 }
\DoxyCodeLine{37 \textcolor{keyword}{template}<\textcolor{keyword}{typename} T1, \textcolor{keyword}{typename} T2>}
\DoxyCodeLine{38 \textcolor{keyword}{inline}}
\DoxyCodeLine{39 \textcolor{keywordtype}{void}}
\DoxyCodeLine{40 glue\_intersect::apply(\mbox{\hyperlink{classMat}{Mat<typename T1::elem\_type>}}\& out, \mbox{\hyperlink{classCol}{uvec}}\& iA, \mbox{\hyperlink{classCol}{uvec}}\& iB, \textcolor{keyword}{const} \mbox{\hyperlink{structBase}{Base<typename T1::elem\_type,T1>}}\& A\_expr, \textcolor{keyword}{const} \mbox{\hyperlink{structBase}{Base<typename T1::elem\_type,T2>}}\& B\_expr, \textcolor{keyword}{const} \textcolor{keywordtype}{bool} calc\_indx)}
\DoxyCodeLine{41   \{}
\DoxyCodeLine{42   arma\_extra\_debug\_sigprint();}
\DoxyCodeLine{43   }
\DoxyCodeLine{44   \textcolor{keyword}{typedef} \textcolor{keyword}{typename} T1::elem\_type eT;}
\DoxyCodeLine{45   }
\DoxyCodeLine{46   \textcolor{keyword}{const} \mbox{\hyperlink{structquasi__unwrap}{quasi\_unwrap<T1>}} UA(A\_expr.get\_ref());}
\DoxyCodeLine{47   \textcolor{keyword}{const} \mbox{\hyperlink{structquasi__unwrap}{quasi\_unwrap<T2>}} UB(B\_expr.get\_ref());}
\DoxyCodeLine{48   }
\DoxyCodeLine{49   \textcolor{keywordflow}{if}(UA.M.is\_empty() || UB.M.is\_empty())}
\DoxyCodeLine{50     \{}
\DoxyCodeLine{51     out.reset();}
\DoxyCodeLine{52     iA.reset();}
\DoxyCodeLine{53     iB.reset();}
\DoxyCodeLine{54     \textcolor{keywordflow}{return};}
\DoxyCodeLine{55     \}}
\DoxyCodeLine{56   }
\DoxyCodeLine{57   \mbox{\hyperlink{classCol}{uvec}} A\_uniq\_indx;}
\DoxyCodeLine{58   \mbox{\hyperlink{classCol}{uvec}} B\_uniq\_indx; }
\DoxyCodeLine{59   }
\DoxyCodeLine{60   \mbox{\hyperlink{classMat}{Mat<eT>}} A\_uniq;}
\DoxyCodeLine{61   \mbox{\hyperlink{classMat}{Mat<eT>}} B\_uniq; }
\DoxyCodeLine{62   }
\DoxyCodeLine{63   \textcolor{keywordflow}{if}(calc\_indx)}
\DoxyCodeLine{64     \{}
\DoxyCodeLine{65     A\_uniq\_indx = find\_unique(UA.M);}
\DoxyCodeLine{66     B\_uniq\_indx = find\_unique(UB.M);}
\DoxyCodeLine{67     }
\DoxyCodeLine{68     A\_uniq = UA.M.elem(A\_uniq\_indx);}
\DoxyCodeLine{69     B\_uniq = UB.M.elem(B\_uniq\_indx);}
\DoxyCodeLine{70     \}}
\DoxyCodeLine{71   \textcolor{keywordflow}{else}}
\DoxyCodeLine{72     \{}
\DoxyCodeLine{73     A\_uniq = unique(UA.M);}
\DoxyCodeLine{74     B\_uniq = unique(UB.M);}
\DoxyCodeLine{75     \}}
\DoxyCodeLine{76   }
\DoxyCodeLine{77   \textcolor{keyword}{const} uword C\_n\_elem = A\_uniq.\mbox{\hyperlink{classMat_a89f0d40af94b6521edd06645a0d68fd4}{n\_elem}} + B\_uniq.\mbox{\hyperlink{classMat_a89f0d40af94b6521edd06645a0d68fd4}{n\_elem}};}
\DoxyCodeLine{78   }
\DoxyCodeLine{79   \mbox{\hyperlink{classCol}{Col<eT>}} C(C\_n\_elem, \mbox{\hyperlink{structarma__nozeros__indicator}{arma\_nozeros\_indicator}}());}
\DoxyCodeLine{80   }
\DoxyCodeLine{81   arrayops::copy(C.memptr(),                 A\_uniq.\mbox{\hyperlink{group__Mat_gad5b1b46a9288e04128aa11c99cc2b444}{memptr}}(), A\_uniq.\mbox{\hyperlink{classMat_a89f0d40af94b6521edd06645a0d68fd4}{n\_elem}});}
\DoxyCodeLine{82   arrayops::copy(C.memptr() + A\_uniq.\mbox{\hyperlink{classMat_a89f0d40af94b6521edd06645a0d68fd4}{n\_elem}}, B\_uniq.\mbox{\hyperlink{group__Mat_gad5b1b46a9288e04128aa11c99cc2b444}{memptr}}(), B\_uniq.\mbox{\hyperlink{classMat_a89f0d40af94b6521edd06645a0d68fd4}{n\_elem}});}
\DoxyCodeLine{83   }
\DoxyCodeLine{84   \mbox{\hyperlink{classCol}{uvec}}    C\_sorted\_indx;}
\DoxyCodeLine{85   \mbox{\hyperlink{classCol}{Col<eT>}} C\_sorted;}
\DoxyCodeLine{86   }
\DoxyCodeLine{87   \textcolor{keywordflow}{if}(calc\_indx)}
\DoxyCodeLine{88     \{}
\DoxyCodeLine{89     C\_sorted\_indx = stable\_sort\_index(C);}
\DoxyCodeLine{90     C\_sorted      = C.elem(C\_sorted\_indx);}
\DoxyCodeLine{91     \}}
\DoxyCodeLine{92   \textcolor{keywordflow}{else}}
\DoxyCodeLine{93     \{}
\DoxyCodeLine{94     C\_sorted = sort(C);}
\DoxyCodeLine{95     \}}
\DoxyCodeLine{96   }
\DoxyCodeLine{97   \textcolor{keyword}{const} eT* C\_sorted\_mem = C\_sorted.\mbox{\hyperlink{group__Mat_gad5b1b46a9288e04128aa11c99cc2b444}{memptr}}();}
\DoxyCodeLine{98   }
\DoxyCodeLine{99   \mbox{\hyperlink{classCol}{uvec}}   jj(C\_n\_elem, \mbox{\hyperlink{structarma__nozeros__indicator}{arma\_nozeros\_indicator}}());  \textcolor{comment}{// worst case length}}
\DoxyCodeLine{100   }
\DoxyCodeLine{101   uword* jj\_mem   = jj.memptr();  }
\DoxyCodeLine{102   uword  jj\_count = 0;}
\DoxyCodeLine{103   }
\DoxyCodeLine{104   \textcolor{keywordflow}{for}(uword i=0; i < (C\_n\_elem-\/1); ++i)}
\DoxyCodeLine{105     \{}
\DoxyCodeLine{106     \textcolor{keywordflow}{if}( C\_sorted\_mem[i] == C\_sorted\_mem[i+1] )}
\DoxyCodeLine{107       \{}
\DoxyCodeLine{108       jj\_mem[jj\_count] = i;}
\DoxyCodeLine{109       ++jj\_count;}
\DoxyCodeLine{110       \}}
\DoxyCodeLine{111     \}}
\DoxyCodeLine{112   }
\DoxyCodeLine{113   \textcolor{keywordflow}{if}(jj\_count == 0)}
\DoxyCodeLine{114     \{}
\DoxyCodeLine{115     out.reset();}
\DoxyCodeLine{116     iA.reset();}
\DoxyCodeLine{117     iB.reset();}
\DoxyCodeLine{118     \textcolor{keywordflow}{return};}
\DoxyCodeLine{119     \}}
\DoxyCodeLine{120   }
\DoxyCodeLine{121   \textcolor{keyword}{const} \mbox{\hyperlink{classCol}{uvec}} ii(jj.memptr(), jj\_count, \textcolor{keyword}{false});}
\DoxyCodeLine{122   }
\DoxyCodeLine{123   \textcolor{keywordflow}{if}(UA.M.is\_rowvec() \&\& UB.M.is\_rowvec())}
\DoxyCodeLine{124     \{}
\DoxyCodeLine{125     out.\mbox{\hyperlink{group__Mat_ga750c2d7d0bd0cf7b88e17a24db252438}{set\_size}}(1, ii.n\_elem);}
\DoxyCodeLine{126     }
\DoxyCodeLine{127     \mbox{\hyperlink{classMat}{Mat<eT>}} out\_alias(out.\mbox{\hyperlink{group__Mat_gad5b1b46a9288e04128aa11c99cc2b444}{memptr}}(), ii.n\_elem, 1, \textcolor{keyword}{false}, \textcolor{keyword}{true});}
\DoxyCodeLine{128     }
\DoxyCodeLine{129     \textcolor{comment}{// NOTE: this relies on .elem() not changing the size of the output and not reallocating memory for the output}}
\DoxyCodeLine{130     out\_alias = C\_sorted.elem(ii);}
\DoxyCodeLine{131     \}}
\DoxyCodeLine{132   \textcolor{keywordflow}{else}}
\DoxyCodeLine{133     \{}
\DoxyCodeLine{134     out = C\_sorted.elem(ii);}
\DoxyCodeLine{135     \}}
\DoxyCodeLine{136   }
\DoxyCodeLine{137   \textcolor{keywordflow}{if}(calc\_indx)}
\DoxyCodeLine{138     \{}
\DoxyCodeLine{139     iA = A\_uniq\_indx.elem(C\_sorted\_indx.elem(ii  )                );}
\DoxyCodeLine{140     iB = B\_uniq\_indx.elem(C\_sorted\_indx.elem(ii+1) -\/ A\_uniq.\mbox{\hyperlink{classMat_a89f0d40af94b6521edd06645a0d68fd4}{n\_elem}});}
\DoxyCodeLine{141     \}}
\DoxyCodeLine{142   \}}
\DoxyCodeLine{143 }
\DoxyCodeLine{144 }
\DoxyCodeLine{145 }

\end{DoxyCode}
