\hypertarget{arma__rng__cxx11_8hpp_source}{}\doxysection{arma\+\_\+rng\+\_\+cxx11.\+hpp}
\label{arma__rng__cxx11_8hpp_source}\index{/Users/motiwari/Desktop/BanditPAM/headers/carma/extern/armadillo-\/code/include/armadillo\_bits/arma\_rng\_cxx11.hpp@{/Users/motiwari/Desktop/BanditPAM/headers/carma/extern/armadillo-\/code/include/armadillo\_bits/arma\_rng\_cxx11.hpp}}

\begin{DoxyCode}{0}
\DoxyCodeLine{1 \textcolor{comment}{// Copyright 2008-\/2016 Conrad Sanderson (http://conradsanderson.id.au)}}
\DoxyCodeLine{2 \textcolor{comment}{// Copyright 2008-\/2016 National ICT Australia (NICTA)}}
\DoxyCodeLine{3 \textcolor{comment}{// }}
\DoxyCodeLine{4 \textcolor{comment}{// Licensed under the Apache License, Version 2.0 (the "{}License"{});}}
\DoxyCodeLine{5 \textcolor{comment}{// you may not use this file except in compliance with the License.}}
\DoxyCodeLine{6 \textcolor{comment}{// You may obtain a copy of the License at}}
\DoxyCodeLine{7 \textcolor{comment}{// http://www.apache.org/licenses/LICENSE-\/2.0}}
\DoxyCodeLine{8 \textcolor{comment}{// }}
\DoxyCodeLine{9 \textcolor{comment}{// Unless required by applicable law or agreed to in writing, software}}
\DoxyCodeLine{10 \textcolor{comment}{// distributed under the License is distributed on an "{}AS IS"{} BASIS,}}
\DoxyCodeLine{11 \textcolor{comment}{// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.}}
\DoxyCodeLine{12 \textcolor{comment}{// See the License for the specific language governing permissions and}}
\DoxyCodeLine{13 \textcolor{comment}{// limitations under the License.}}
\DoxyCodeLine{14 \textcolor{comment}{// -\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/}}
\DoxyCodeLine{15 }
\DoxyCodeLine{16 }
\DoxyCodeLine{19 }
\DoxyCodeLine{20 }
\DoxyCodeLine{21 \textcolor{keyword}{class }\mbox{\hyperlink{classarma__rng__cxx11}{arma\_rng\_cxx11}}}
\DoxyCodeLine{22   \{}
\DoxyCodeLine{23   \textcolor{keyword}{public}:}
\DoxyCodeLine{24   }
\DoxyCodeLine{25   \textcolor{keyword}{typedef} std::mt19937\_64::result\_type seed\_type;}
\DoxyCodeLine{26   }
\DoxyCodeLine{27   \textcolor{keyword}{inline} \textcolor{keywordtype}{void} set\_seed(\textcolor{keyword}{const} seed\_type val);}
\DoxyCodeLine{28   }
\DoxyCodeLine{29   arma\_inline \textcolor{keywordtype}{int}    randi\_val();}
\DoxyCodeLine{30   arma\_inline \textcolor{keywordtype}{double} randu\_val();}
\DoxyCodeLine{31   arma\_inline \textcolor{keywordtype}{double} randn\_val();}
\DoxyCodeLine{32   }
\DoxyCodeLine{33   \textcolor{keyword}{template}<\textcolor{keyword}{typename} eT>}
\DoxyCodeLine{34   arma\_inline \textcolor{keywordtype}{void} randn\_dual\_val(eT\& out1, eT\& out2);}
\DoxyCodeLine{35   }
\DoxyCodeLine{36   \textcolor{keyword}{template}<\textcolor{keyword}{typename} eT>}
\DoxyCodeLine{37   \textcolor{keyword}{inline} \textcolor{keywordtype}{void} randi\_fill(eT* mem, \textcolor{keyword}{const} uword N, \textcolor{keyword}{const} \textcolor{keywordtype}{int} a, \textcolor{keyword}{const} \textcolor{keywordtype}{int} b);}
\DoxyCodeLine{38   }
\DoxyCodeLine{39   \textcolor{keyword}{inline} \textcolor{keyword}{static} \textcolor{keywordtype}{int} randi\_max\_val();}
\DoxyCodeLine{40   }
\DoxyCodeLine{41   \textcolor{keyword}{template}<\textcolor{keyword}{typename} eT>}
\DoxyCodeLine{42   \textcolor{keyword}{inline} \textcolor{keywordtype}{void} randg\_fill\_simple(eT* mem, \textcolor{keyword}{const} uword N, \textcolor{keyword}{const} \textcolor{keywordtype}{double} a, \textcolor{keyword}{const} \textcolor{keywordtype}{double} b);}
\DoxyCodeLine{43   }
\DoxyCodeLine{44   \textcolor{keyword}{template}<\textcolor{keyword}{typename} eT>}
\DoxyCodeLine{45   \textcolor{keyword}{inline} \textcolor{keywordtype}{void} randg\_fill(eT* mem, \textcolor{keyword}{const} uword N, \textcolor{keyword}{const} \textcolor{keywordtype}{double} a, \textcolor{keyword}{const} \textcolor{keywordtype}{double} b);}
\DoxyCodeLine{46   }
\DoxyCodeLine{47   }
\DoxyCodeLine{48   \textcolor{keyword}{private}:}
\DoxyCodeLine{49   }
\DoxyCodeLine{50   arma\_aligned std::mt19937\_64 engine;                           \textcolor{comment}{// typedef for std::mersenne\_twister\_engine with preset parameters}}
\DoxyCodeLine{51   }
\DoxyCodeLine{52   arma\_aligned std::uniform\_int\_distribution<int>     i\_distr;   \textcolor{comment}{// by default uses a=0, b=std::numeric\_limits<int>::max()}}
\DoxyCodeLine{53   }
\DoxyCodeLine{54   arma\_aligned std::uniform\_real\_distribution<double> u\_distr;   \textcolor{comment}{// by default uses [0,1) interval}}
\DoxyCodeLine{55   }
\DoxyCodeLine{56   arma\_aligned std::normal\_distribution<double>       n\_distr;   \textcolor{comment}{// by default uses mean=0.0 and stddev=1.0}}
\DoxyCodeLine{57   \};}
\DoxyCodeLine{58 }
\DoxyCodeLine{59 }
\DoxyCodeLine{60 }
\DoxyCodeLine{61 \textcolor{keyword}{inline}}
\DoxyCodeLine{62 \textcolor{keywordtype}{void}}
\DoxyCodeLine{63 arma\_rng\_cxx11::set\_seed(\textcolor{keyword}{const} arma\_rng\_cxx11::seed\_type val)}
\DoxyCodeLine{64   \{}
\DoxyCodeLine{65   engine.seed(val);}
\DoxyCodeLine{66   }
\DoxyCodeLine{67   i\_distr.reset();}
\DoxyCodeLine{68   u\_distr.reset();}
\DoxyCodeLine{69   n\_distr.reset();}
\DoxyCodeLine{70   \}}
\DoxyCodeLine{71 }
\DoxyCodeLine{72 }
\DoxyCodeLine{73 }
\DoxyCodeLine{74 arma\_inline}
\DoxyCodeLine{75 \textcolor{keywordtype}{int}}
\DoxyCodeLine{76 arma\_rng\_cxx11::randi\_val()}
\DoxyCodeLine{77   \{}
\DoxyCodeLine{78   \textcolor{keywordflow}{return} i\_distr(engine);}
\DoxyCodeLine{79   \}}
\DoxyCodeLine{80 }
\DoxyCodeLine{81 }
\DoxyCodeLine{82 }
\DoxyCodeLine{83 arma\_inline}
\DoxyCodeLine{84 \textcolor{keywordtype}{double}}
\DoxyCodeLine{85 arma\_rng\_cxx11::randu\_val()}
\DoxyCodeLine{86   \{}
\DoxyCodeLine{87   \textcolor{keywordflow}{return} u\_distr(engine);}
\DoxyCodeLine{88   \}}
\DoxyCodeLine{89 }
\DoxyCodeLine{90 }
\DoxyCodeLine{91 }
\DoxyCodeLine{92 arma\_inline}
\DoxyCodeLine{93 \textcolor{keywordtype}{double}}
\DoxyCodeLine{94 arma\_rng\_cxx11::randn\_val()}
\DoxyCodeLine{95   \{}
\DoxyCodeLine{96   \textcolor{keywordflow}{return} n\_distr(engine);}
\DoxyCodeLine{97   \}}
\DoxyCodeLine{98 }
\DoxyCodeLine{99 }
\DoxyCodeLine{100 }
\DoxyCodeLine{101 \textcolor{keyword}{template}<\textcolor{keyword}{typename} eT>}
\DoxyCodeLine{102 arma\_inline}
\DoxyCodeLine{103 \textcolor{keywordtype}{void}}
\DoxyCodeLine{104 arma\_rng\_cxx11::randn\_dual\_val(eT\& out1, eT\& out2)}
\DoxyCodeLine{105   \{}
\DoxyCodeLine{106   out1 = eT( n\_distr(engine) );}
\DoxyCodeLine{107   out2 = eT( n\_distr(engine) );}
\DoxyCodeLine{108   \}}
\DoxyCodeLine{109 }
\DoxyCodeLine{110 }
\DoxyCodeLine{111 }
\DoxyCodeLine{112 \textcolor{keyword}{template}<\textcolor{keyword}{typename} eT>}
\DoxyCodeLine{113 \textcolor{keyword}{inline}}
\DoxyCodeLine{114 \textcolor{keywordtype}{void}}
\DoxyCodeLine{115 arma\_rng\_cxx11::randi\_fill(eT* mem, \textcolor{keyword}{const} uword N, \textcolor{keyword}{const} \textcolor{keywordtype}{int} a, \textcolor{keyword}{const} \textcolor{keywordtype}{int} b)}
\DoxyCodeLine{116   \{}
\DoxyCodeLine{117   std::uniform\_int\_distribution<int> local\_i\_distr(a, b);}
\DoxyCodeLine{118   }
\DoxyCodeLine{119   \textcolor{keywordflow}{for}(uword i=0; i<N; ++i)}
\DoxyCodeLine{120     \{}
\DoxyCodeLine{121     mem[i] = eT(local\_i\_distr(engine));}
\DoxyCodeLine{122     \}}
\DoxyCodeLine{123   \}}
\DoxyCodeLine{124 }
\DoxyCodeLine{125 }
\DoxyCodeLine{126 }
\DoxyCodeLine{127 \textcolor{keyword}{inline}}
\DoxyCodeLine{128 \textcolor{keywordtype}{int}}
\DoxyCodeLine{129 arma\_rng\_cxx11::randi\_max\_val()}
\DoxyCodeLine{130   \{}
\DoxyCodeLine{131   \textcolor{keywordflow}{return} \mbox{\hyperlink{group__fn__max_gaf2317ac99c92ae7a239291d01a615893}{std::numeric\_limits<int>::max}}();}
\DoxyCodeLine{132   \}}
\DoxyCodeLine{133 }
\DoxyCodeLine{134 }
\DoxyCodeLine{135 }
\DoxyCodeLine{136 \textcolor{keyword}{template}<\textcolor{keyword}{typename} eT>}
\DoxyCodeLine{137 \textcolor{keyword}{inline}}
\DoxyCodeLine{138 \textcolor{keywordtype}{void}}
\DoxyCodeLine{139 arma\_rng\_cxx11::randg\_fill\_simple(eT* mem, \textcolor{keyword}{const} uword N, \textcolor{keyword}{const} \textcolor{keywordtype}{double} a, \textcolor{keyword}{const} \textcolor{keywordtype}{double} b)}
\DoxyCodeLine{140   \{}
\DoxyCodeLine{141   std::gamma\_distribution<double> g\_distr(a,b);}
\DoxyCodeLine{142   }
\DoxyCodeLine{143   \textcolor{keywordflow}{for}(uword i=0; i<N; ++i)}
\DoxyCodeLine{144     \{}
\DoxyCodeLine{145     mem[i] = eT(g\_distr(engine));}
\DoxyCodeLine{146     \}}
\DoxyCodeLine{147   \}}
\DoxyCodeLine{148 }
\DoxyCodeLine{149 }
\DoxyCodeLine{150 }
\DoxyCodeLine{151 \textcolor{keyword}{template}<\textcolor{keyword}{typename} eT>}
\DoxyCodeLine{152 \textcolor{keyword}{inline}}
\DoxyCodeLine{153 \textcolor{keywordtype}{void}}
\DoxyCodeLine{154 arma\_rng\_cxx11::randg\_fill(eT* mem, \textcolor{keyword}{const} uword N, \textcolor{keyword}{const} \textcolor{keywordtype}{double} a, \textcolor{keyword}{const} \textcolor{keywordtype}{double} b)}
\DoxyCodeLine{155   \{}
\DoxyCodeLine{156 \textcolor{preprocessor}{  \#if defined(ARMA\_USE\_OPENMP)}}
\DoxyCodeLine{157     \{}
\DoxyCodeLine{158     \textcolor{keywordflow}{if}((N < 512) || omp\_in\_parallel())  \{ (*this).randg\_fill\_simple(mem, N, a, b); \textcolor{keywordflow}{return}; \}}
\DoxyCodeLine{159     }
\DoxyCodeLine{160     \textcolor{keyword}{typedef} std::mt19937\_64                  motor\_type;}
\DoxyCodeLine{161     \textcolor{keyword}{typedef} std::mt19937\_64::result\_type      ovum\_type;}
\DoxyCodeLine{162     \textcolor{keyword}{typedef} std::gamma\_distribution<double>  distr\_type;}
\DoxyCodeLine{163     }
\DoxyCodeLine{164     \textcolor{keyword}{const} uword n\_threads = uword( mp\_thread\_limit::get() );}
\DoxyCodeLine{165     }
\DoxyCodeLine{166     std::vector<motor\_type> g\_motor(n\_threads);}
\DoxyCodeLine{167     std::vector<distr\_type> g\_distr(n\_threads);}
\DoxyCodeLine{168     }
\DoxyCodeLine{169     \textcolor{keyword}{const} distr\_type g\_distr\_base(a,b);}
\DoxyCodeLine{170     }
\DoxyCodeLine{171     \textcolor{keywordflow}{for}(uword t=0; t < n\_threads; ++t)}
\DoxyCodeLine{172       \{}
\DoxyCodeLine{173       motor\_type\& g\_motor\_t = g\_motor[t];}
\DoxyCodeLine{174       distr\_type\& g\_distr\_t = g\_distr[t];}
\DoxyCodeLine{175       }
\DoxyCodeLine{176       g\_motor\_t.seed( ovum\_type(t) + ovum\_type((*this).randi\_val()) );}
\DoxyCodeLine{177       }
\DoxyCodeLine{178       g\_distr\_t.param( g\_distr\_base.param() );}
\DoxyCodeLine{179       \}}
\DoxyCodeLine{180     }
\DoxyCodeLine{181     \textcolor{keyword}{const} uword chunk\_size = N / n\_threads;}
\DoxyCodeLine{182     }
\DoxyCodeLine{183 \textcolor{preprocessor}{    \#pragma omp parallel for schedule(static) num\_threads(int(n\_threads))}}
\DoxyCodeLine{184     \textcolor{keywordflow}{for}(uword t=0; t < n\_threads; ++t)}
\DoxyCodeLine{185       \{}
\DoxyCodeLine{186       \textcolor{keyword}{const} uword start = (t+0) * chunk\_size;}
\DoxyCodeLine{187       \textcolor{keyword}{const} uword endp1 = (t+1) * chunk\_size;}
\DoxyCodeLine{188       }
\DoxyCodeLine{189       motor\_type\& g\_motor\_t = g\_motor[t];}
\DoxyCodeLine{190       distr\_type\& g\_distr\_t = g\_distr[t];}
\DoxyCodeLine{191       }
\DoxyCodeLine{192       \textcolor{keywordflow}{for}(uword i=start; i < endp1; ++i)  \{ mem[i] = eT( g\_distr\_t(g\_motor\_t)); \}}
\DoxyCodeLine{193       \}}
\DoxyCodeLine{194     }
\DoxyCodeLine{195     motor\_type\& g\_motor\_0 = g\_motor[0];}
\DoxyCodeLine{196     distr\_type\& g\_distr\_0 = g\_distr[0];}
\DoxyCodeLine{197     }
\DoxyCodeLine{198     \textcolor{keywordflow}{for}(uword i=(n\_threads*chunk\_size); i < N; ++i)  \{ mem[i] = eT( g\_distr\_0(g\_motor\_0)); \}}
\DoxyCodeLine{199     \}}
\DoxyCodeLine{200 \textcolor{preprocessor}{  \#else}}
\DoxyCodeLine{201     \{}
\DoxyCodeLine{202     (*this).randg\_fill\_simple(mem, N, a, b);}
\DoxyCodeLine{203     \}}
\DoxyCodeLine{204 \textcolor{preprocessor}{  \#endif}}
\DoxyCodeLine{205   \}}
\DoxyCodeLine{206 }
\DoxyCodeLine{207 }

\end{DoxyCode}
