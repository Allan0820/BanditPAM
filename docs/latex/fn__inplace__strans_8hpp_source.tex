\hypertarget{fn__inplace__strans_8hpp_source}{}\doxysection{fn\+\_\+inplace\+\_\+strans.\+hpp}
\label{fn__inplace__strans_8hpp_source}\index{/Users/motiwari/Desktop/BanditPAM/headers/carma/extern/armadillo-\/code/include/armadillo\_bits/fn\_inplace\_strans.hpp@{/Users/motiwari/Desktop/BanditPAM/headers/carma/extern/armadillo-\/code/include/armadillo\_bits/fn\_inplace\_strans.hpp}}

\begin{DoxyCode}{0}
\DoxyCodeLine{1 \textcolor{comment}{// Copyright 2008-\/2016 Conrad Sanderson (http://conradsanderson.id.au)}}
\DoxyCodeLine{2 \textcolor{comment}{// Copyright 2008-\/2016 National ICT Australia (NICTA)}}
\DoxyCodeLine{3 \textcolor{comment}{// }}
\DoxyCodeLine{4 \textcolor{comment}{// Licensed under the Apache License, Version 2.0 (the "{}License"{});}}
\DoxyCodeLine{5 \textcolor{comment}{// you may not use this file except in compliance with the License.}}
\DoxyCodeLine{6 \textcolor{comment}{// You may obtain a copy of the License at}}
\DoxyCodeLine{7 \textcolor{comment}{// http://www.apache.org/licenses/LICENSE-\/2.0}}
\DoxyCodeLine{8 \textcolor{comment}{// }}
\DoxyCodeLine{9 \textcolor{comment}{// Unless required by applicable law or agreed to in writing, software}}
\DoxyCodeLine{10 \textcolor{comment}{// distributed under the License is distributed on an "{}AS IS"{} BASIS,}}
\DoxyCodeLine{11 \textcolor{comment}{// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.}}
\DoxyCodeLine{12 \textcolor{comment}{// See the License for the specific language governing permissions and}}
\DoxyCodeLine{13 \textcolor{comment}{// limitations under the License.}}
\DoxyCodeLine{14 \textcolor{comment}{// -\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/}}
\DoxyCodeLine{15 }
\DoxyCodeLine{16 }
\DoxyCodeLine{19 }
\DoxyCodeLine{20 }
\DoxyCodeLine{21 }
\DoxyCodeLine{22 \textcolor{keyword}{template}<\textcolor{keyword}{typename} eT>}
\DoxyCodeLine{23 \textcolor{keyword}{inline}}
\DoxyCodeLine{24 \textcolor{keywordtype}{void}}
\DoxyCodeLine{25 inplace\_strans}
\DoxyCodeLine{26   (}
\DoxyCodeLine{27         \mbox{\hyperlink{classMat}{Mat<eT>}}\& X,}
\DoxyCodeLine{28   \textcolor{keyword}{const} \textcolor{keywordtype}{char}*    method = \textcolor{stringliteral}{"{}std"{}}}
\DoxyCodeLine{29   )}
\DoxyCodeLine{30   \{}
\DoxyCodeLine{31   arma\_extra\_debug\_sigprint();}
\DoxyCodeLine{32   }
\DoxyCodeLine{33   \textcolor{keyword}{const} \textcolor{keywordtype}{char} sig = (method != \textcolor{keyword}{nullptr}) ? method[0] : \textcolor{keywordtype}{char}(0);}
\DoxyCodeLine{34   }
\DoxyCodeLine{35   arma\_debug\_check( ((sig != \textcolor{charliteral}{'s'}) \&\& (sig != \textcolor{charliteral}{'l'})), \textcolor{stringliteral}{"{}inplace\_strans(): unknown method specified"{}} );}
\DoxyCodeLine{36   }
\DoxyCodeLine{37   \textcolor{keyword}{const} \textcolor{keywordtype}{bool} low\_memory = (sig == \textcolor{charliteral}{'l'});}
\DoxyCodeLine{38   }
\DoxyCodeLine{39   \textcolor{keywordflow}{if}( (low\_memory == \textcolor{keyword}{false}) || (X.n\_rows == X.n\_cols) )}
\DoxyCodeLine{40     \{}
\DoxyCodeLine{41     op\_strans::apply\_mat\_inplace(X);}
\DoxyCodeLine{42     \}}
\DoxyCodeLine{43   \textcolor{keywordflow}{else}}
\DoxyCodeLine{44     \{}
\DoxyCodeLine{45     \textcolor{comment}{// in-\/place algorithm inspired by:}}
\DoxyCodeLine{46     \textcolor{comment}{// Fred G. Gustavson, Tadeusz Swirszcz.}}
\DoxyCodeLine{47     \textcolor{comment}{// In-\/Place Transposition of Rectangular Matrices.}}
\DoxyCodeLine{48     \textcolor{comment}{// Applied Parallel Computing. State of the Art in Scientific Computing.}}
\DoxyCodeLine{49     \textcolor{comment}{// Lecture Notes in Computer Science. Volume 4699, pp. 560-\/569, 2007.}}
\DoxyCodeLine{50     }
\DoxyCodeLine{51     }
\DoxyCodeLine{52     \textcolor{comment}{// X.set\_size() will check whether we can change the dimensions of X;}}
\DoxyCodeLine{53     \textcolor{comment}{// X.set\_size() will also reuse existing memory, as the number of elements hasn't changed}}
\DoxyCodeLine{54     }
\DoxyCodeLine{55     X.set\_size(X.n\_cols, X.n\_rows);}
\DoxyCodeLine{56     }
\DoxyCodeLine{57     \textcolor{keyword}{const} uword m = X.n\_cols;}
\DoxyCodeLine{58     \textcolor{keyword}{const} uword n = X.n\_rows;}
\DoxyCodeLine{59     }
\DoxyCodeLine{60     std::vector<bool> visited(X.n\_elem);  \textcolor{comment}{// TODO: replace std::vector<bool> with a better implementation}}
\DoxyCodeLine{61     }
\DoxyCodeLine{62     \textcolor{keywordflow}{for}(uword col = 0; col < m; ++col)}
\DoxyCodeLine{63     \textcolor{keywordflow}{for}(uword row = 0; row < n; ++row)}
\DoxyCodeLine{64       \{}
\DoxyCodeLine{65       \textcolor{keyword}{const} uword pos = col*n + row;}
\DoxyCodeLine{66       }
\DoxyCodeLine{67       \textcolor{keywordflow}{if}(visited[pos] == \textcolor{keyword}{false})}
\DoxyCodeLine{68         \{}
\DoxyCodeLine{69         uword curr\_pos = pos;}
\DoxyCodeLine{70           }
\DoxyCodeLine{71         eT val = X.at(row, col);}
\DoxyCodeLine{72         }
\DoxyCodeLine{73         \textcolor{keywordflow}{while}(visited[curr\_pos] == \textcolor{keyword}{false}) }
\DoxyCodeLine{74           \{}
\DoxyCodeLine{75           visited[curr\_pos] = \textcolor{keyword}{true};}
\DoxyCodeLine{76             }
\DoxyCodeLine{77           \textcolor{keyword}{const} uword j = curr\_pos / m;}
\DoxyCodeLine{78           \textcolor{keyword}{const} uword i = curr\_pos -\/ m * j;}
\DoxyCodeLine{79           }
\DoxyCodeLine{80           \textcolor{keyword}{const} eT tmp = X.at(j, i);}
\DoxyCodeLine{81           X.at(j, i) = val;}
\DoxyCodeLine{82           val = tmp;}
\DoxyCodeLine{83             }
\DoxyCodeLine{84           curr\_pos = i*n + j;}
\DoxyCodeLine{85           \}}
\DoxyCodeLine{86         \}}
\DoxyCodeLine{87       \}}
\DoxyCodeLine{88     \}}
\DoxyCodeLine{89   \}}
\DoxyCodeLine{90 }
\DoxyCodeLine{91 }
\DoxyCodeLine{92 }

\end{DoxyCode}
