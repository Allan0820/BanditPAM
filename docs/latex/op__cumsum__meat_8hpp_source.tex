\hypertarget{op__cumsum__meat_8hpp_source}{}\doxysection{op\+\_\+cumsum\+\_\+meat.\+hpp}
\label{op__cumsum__meat_8hpp_source}\index{/Users/motiwari/Desktop/BanditPAM/headers/carma/extern/armadillo-\/code/include/armadillo\_bits/op\_cumsum\_meat.hpp@{/Users/motiwari/Desktop/BanditPAM/headers/carma/extern/armadillo-\/code/include/armadillo\_bits/op\_cumsum\_meat.hpp}}

\begin{DoxyCode}{0}
\DoxyCodeLine{1 \textcolor{comment}{// Copyright 2008-\/2016 Conrad Sanderson (http://conradsanderson.id.au)}}
\DoxyCodeLine{2 \textcolor{comment}{// Copyright 2008-\/2016 National ICT Australia (NICTA)}}
\DoxyCodeLine{3 \textcolor{comment}{// }}
\DoxyCodeLine{4 \textcolor{comment}{// Licensed under the Apache License, Version 2.0 (the "{}License"{});}}
\DoxyCodeLine{5 \textcolor{comment}{// you may not use this file except in compliance with the License.}}
\DoxyCodeLine{6 \textcolor{comment}{// You may obtain a copy of the License at}}
\DoxyCodeLine{7 \textcolor{comment}{// http://www.apache.org/licenses/LICENSE-\/2.0}}
\DoxyCodeLine{8 \textcolor{comment}{// }}
\DoxyCodeLine{9 \textcolor{comment}{// Unless required by applicable law or agreed to in writing, software}}
\DoxyCodeLine{10 \textcolor{comment}{// distributed under the License is distributed on an "{}AS IS"{} BASIS,}}
\DoxyCodeLine{11 \textcolor{comment}{// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.}}
\DoxyCodeLine{12 \textcolor{comment}{// See the License for the specific language governing permissions and}}
\DoxyCodeLine{13 \textcolor{comment}{// limitations under the License.}}
\DoxyCodeLine{14 \textcolor{comment}{// -\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/}}
\DoxyCodeLine{15 }
\DoxyCodeLine{16 }
\DoxyCodeLine{19 }
\DoxyCodeLine{20 }
\DoxyCodeLine{21 }
\DoxyCodeLine{22 \textcolor{keyword}{template}<\textcolor{keyword}{typename} eT>}
\DoxyCodeLine{23 \textcolor{keyword}{inline}}
\DoxyCodeLine{24 \textcolor{keywordtype}{void}}
\DoxyCodeLine{25 op\_cumsum::apply\_noalias(\mbox{\hyperlink{classMat}{Mat<eT>}}\& out, \textcolor{keyword}{const} \mbox{\hyperlink{classMat}{Mat<eT>}}\& X, \textcolor{keyword}{const} uword dim)}
\DoxyCodeLine{26   \{}
\DoxyCodeLine{27   arma\_extra\_debug\_sigprint();}
\DoxyCodeLine{28   }
\DoxyCodeLine{29   uword n\_rows = X.n\_rows;}
\DoxyCodeLine{30   uword n\_cols = X.n\_cols;}
\DoxyCodeLine{31   }
\DoxyCodeLine{32   out.\mbox{\hyperlink{group__Mat_ga750c2d7d0bd0cf7b88e17a24db252438}{set\_size}}(n\_rows,n\_cols);}
\DoxyCodeLine{33   }
\DoxyCodeLine{34   \textcolor{keywordflow}{if}(out.\mbox{\hyperlink{classMat_a89f0d40af94b6521edd06645a0d68fd4}{n\_elem}} == 0)  \{ \textcolor{keywordflow}{return}; \}}
\DoxyCodeLine{35   }
\DoxyCodeLine{36   \textcolor{keywordflow}{if}(dim == 0)}
\DoxyCodeLine{37     \{}
\DoxyCodeLine{38     \textcolor{keywordflow}{if}(n\_cols == 1)}
\DoxyCodeLine{39       \{}
\DoxyCodeLine{40       \textcolor{keyword}{const} eT*   X\_mem =   X.memptr();}
\DoxyCodeLine{41             eT* out\_mem = out.\mbox{\hyperlink{group__Mat_gad5b1b46a9288e04128aa11c99cc2b444}{memptr}}();}
\DoxyCodeLine{42       }
\DoxyCodeLine{43       eT acc = eT(0);}
\DoxyCodeLine{44       }
\DoxyCodeLine{45       \textcolor{keywordflow}{for}(uword row=0; row < n\_rows; ++row)}
\DoxyCodeLine{46         \{}
\DoxyCodeLine{47         acc += X\_mem[row];}
\DoxyCodeLine{48         }
\DoxyCodeLine{49         out\_mem[row] = acc;}
\DoxyCodeLine{50         \}}
\DoxyCodeLine{51       \}}
\DoxyCodeLine{52     \textcolor{keywordflow}{else}}
\DoxyCodeLine{53       \{}
\DoxyCodeLine{54       \textcolor{keywordflow}{for}(uword col=0; col < n\_cols; ++col)}
\DoxyCodeLine{55         \{}
\DoxyCodeLine{56         \textcolor{keyword}{const} eT*   X\_colmem =   X.colptr(col);}
\DoxyCodeLine{57               eT* out\_colmem = out.\mbox{\hyperlink{group__Mat_gad6a294c2ed4726f7b4b95e750ddfeb7a}{colptr}}(col);}
\DoxyCodeLine{58         }
\DoxyCodeLine{59         eT acc = eT(0);}
\DoxyCodeLine{60         }
\DoxyCodeLine{61         \textcolor{keywordflow}{for}(uword row=0; row < n\_rows; ++row)}
\DoxyCodeLine{62           \{}
\DoxyCodeLine{63           acc += X\_colmem[row];}
\DoxyCodeLine{64           }
\DoxyCodeLine{65           out\_colmem[row] = acc;}
\DoxyCodeLine{66           \}}
\DoxyCodeLine{67         \}}
\DoxyCodeLine{68       \}}
\DoxyCodeLine{69     \}}
\DoxyCodeLine{70   \textcolor{keywordflow}{else}}
\DoxyCodeLine{71   \textcolor{keywordflow}{if}(dim == 1)}
\DoxyCodeLine{72     \{}
\DoxyCodeLine{73     \textcolor{keywordflow}{if}(n\_rows == 1)}
\DoxyCodeLine{74       \{}
\DoxyCodeLine{75       \textcolor{keyword}{const} eT*   X\_mem =   X.memptr();}
\DoxyCodeLine{76             eT* out\_mem = out.\mbox{\hyperlink{group__Mat_gad5b1b46a9288e04128aa11c99cc2b444}{memptr}}();}
\DoxyCodeLine{77       }
\DoxyCodeLine{78       eT acc = eT(0);}
\DoxyCodeLine{79       }
\DoxyCodeLine{80       \textcolor{keywordflow}{for}(uword col=0; col < n\_cols; ++col)}
\DoxyCodeLine{81         \{}
\DoxyCodeLine{82         acc += X\_mem[col];}
\DoxyCodeLine{83         }
\DoxyCodeLine{84         out\_mem[col] = acc;}
\DoxyCodeLine{85         \}}
\DoxyCodeLine{86       \}}
\DoxyCodeLine{87     \textcolor{keywordflow}{else}}
\DoxyCodeLine{88       \{}
\DoxyCodeLine{89       \textcolor{keywordflow}{if}(n\_cols > 0)}
\DoxyCodeLine{90         \{}
\DoxyCodeLine{91         arrayops::copy( out.\mbox{\hyperlink{group__Mat_gad6a294c2ed4726f7b4b95e750ddfeb7a}{colptr}}(0), X.colptr(0), n\_rows );}
\DoxyCodeLine{92         }
\DoxyCodeLine{93         \textcolor{keywordflow}{for}(uword col=1; col < n\_cols; ++col)}
\DoxyCodeLine{94           \{}
\DoxyCodeLine{95           \textcolor{keyword}{const} eT* out\_colmem\_prev = out.\mbox{\hyperlink{group__Mat_gad6a294c2ed4726f7b4b95e750ddfeb7a}{colptr}}(col-\/1);}
\DoxyCodeLine{96                 eT* out\_colmem      = out.\mbox{\hyperlink{group__Mat_gad6a294c2ed4726f7b4b95e750ddfeb7a}{colptr}}(col  );}
\DoxyCodeLine{97           \textcolor{keyword}{const} eT*   X\_colmem      =   X.colptr(col  );}
\DoxyCodeLine{98           }
\DoxyCodeLine{99           \textcolor{keywordflow}{for}(uword row=0; row < n\_rows; ++row)}
\DoxyCodeLine{100             \{}
\DoxyCodeLine{101             out\_colmem[row] = out\_colmem\_prev[row] + X\_colmem[row];}
\DoxyCodeLine{102             \}}
\DoxyCodeLine{103           \}}
\DoxyCodeLine{104         \}}
\DoxyCodeLine{105       \}}
\DoxyCodeLine{106     \}}
\DoxyCodeLine{107   \}}
\DoxyCodeLine{108 }
\DoxyCodeLine{109 }
\DoxyCodeLine{110 }
\DoxyCodeLine{111 \textcolor{keyword}{template}<\textcolor{keyword}{typename} T1>}
\DoxyCodeLine{112 \textcolor{keyword}{inline}}
\DoxyCodeLine{113 \textcolor{keywordtype}{void}}
\DoxyCodeLine{114 op\_cumsum::apply(\mbox{\hyperlink{classMat}{Mat<typename T1::elem\_type>}}\& out, \textcolor{keyword}{const} \mbox{\hyperlink{classOp}{Op<T1,op\_cumsum>}}\& in)}
\DoxyCodeLine{115   \{}
\DoxyCodeLine{116   arma\_extra\_debug\_sigprint();}
\DoxyCodeLine{117   }
\DoxyCodeLine{118   \textcolor{keyword}{typedef} \textcolor{keyword}{typename} T1::elem\_type eT;}
\DoxyCodeLine{119   }
\DoxyCodeLine{120   \textcolor{keyword}{const} uword dim = in.\mbox{\hyperlink{classOp_a197cb9330fe0d72c976d6223514c4bd6}{aux\_uword\_a}};}
\DoxyCodeLine{121   }
\DoxyCodeLine{122   arma\_debug\_check( (dim > 1), \textcolor{stringliteral}{"{}cumsum(): parameter 'dim' must be 0 or 1"{}} );}
\DoxyCodeLine{123   }
\DoxyCodeLine{124   \textcolor{keyword}{const} \mbox{\hyperlink{structquasi__unwrap}{quasi\_unwrap<T1>}} U(in.\mbox{\hyperlink{classOp_af7ab7221b6e233cdd38b9f9b69f301ce}{m}});}
\DoxyCodeLine{125   }
\DoxyCodeLine{126   \textcolor{keywordflow}{if}(U.is\_alias(out))}
\DoxyCodeLine{127     \{}
\DoxyCodeLine{128     \mbox{\hyperlink{classMat}{Mat<eT>}} tmp;}
\DoxyCodeLine{129     }
\DoxyCodeLine{130     op\_cumsum::apply\_noalias(tmp, U.M, dim);}
\DoxyCodeLine{131     }
\DoxyCodeLine{132     out.\mbox{\hyperlink{group__Mat_gaff06a75771f96605f7cc4f8c6b3fceb7}{steal\_mem}}(tmp);}
\DoxyCodeLine{133     \}}
\DoxyCodeLine{134   \textcolor{keywordflow}{else}}
\DoxyCodeLine{135     \{}
\DoxyCodeLine{136     op\_cumsum::apply\_noalias(out, U.M, dim);}
\DoxyCodeLine{137     \}}
\DoxyCodeLine{138   \}}
\DoxyCodeLine{139 }
\DoxyCodeLine{140 }
\DoxyCodeLine{141 }
\DoxyCodeLine{142 \textcolor{keyword}{template}<\textcolor{keyword}{typename} T1>}
\DoxyCodeLine{143 \textcolor{keyword}{inline}}
\DoxyCodeLine{144 \textcolor{keywordtype}{void}}
\DoxyCodeLine{145 op\_cumsum\_vec::apply(\mbox{\hyperlink{classMat}{Mat<typename T1::elem\_type>}}\& out, \textcolor{keyword}{const} \mbox{\hyperlink{classOp}{Op<T1,op\_cumsum\_vec>}}\& in)}
\DoxyCodeLine{146   \{}
\DoxyCodeLine{147   arma\_extra\_debug\_sigprint();}
\DoxyCodeLine{148   }
\DoxyCodeLine{149   \textcolor{keyword}{typedef} \textcolor{keyword}{typename} T1::elem\_type eT;}
\DoxyCodeLine{150   }
\DoxyCodeLine{151   \textcolor{keyword}{const} \mbox{\hyperlink{structquasi__unwrap}{quasi\_unwrap<T1>}} U(in.\mbox{\hyperlink{classOp_af7ab7221b6e233cdd38b9f9b69f301ce}{m}});}
\DoxyCodeLine{152   }
\DoxyCodeLine{153   \textcolor{keyword}{const} uword dim = (T1::is\_xvec) ? uword(U.M.is\_rowvec() ? 1 : 0) : uword((T1::is\_row) ? 1 : 0);}
\DoxyCodeLine{154   }
\DoxyCodeLine{155   \textcolor{keywordflow}{if}(U.is\_alias(out))}
\DoxyCodeLine{156     \{}
\DoxyCodeLine{157     \mbox{\hyperlink{classMat}{Mat<eT>}} tmp;}
\DoxyCodeLine{158     }
\DoxyCodeLine{159     op\_cumsum::apply\_noalias(tmp, U.M, dim);}
\DoxyCodeLine{160     }
\DoxyCodeLine{161     out.\mbox{\hyperlink{group__Mat_gaff06a75771f96605f7cc4f8c6b3fceb7}{steal\_mem}}(tmp);}
\DoxyCodeLine{162     \}}
\DoxyCodeLine{163   \textcolor{keywordflow}{else}}
\DoxyCodeLine{164     \{}
\DoxyCodeLine{165     op\_cumsum::apply\_noalias(out, U.M, dim);}
\DoxyCodeLine{166     \}}
\DoxyCodeLine{167   \}}
\DoxyCodeLine{168 }
\DoxyCodeLine{169 }
\DoxyCodeLine{170 }
\DoxyCodeLine{172 }

\end{DoxyCode}
